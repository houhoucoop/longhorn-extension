{"version":3,"file":"longhorn-0.1.0.umd.min.detail.js","mappings":"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","sources":["webpack://longhorn-0.1.0/./detail/longhorn.io.engineimage.vue","webpack://longhorn-0.1.0/./detail/longhorn.io.engineimage.vue?54d2","webpack://longhorn-0.1.0/../../node_modules/@rancher/shell/components/Resource/Detail/FetchLoader/composables.ts","webpack://longhorn-0.1.0/./detail/longhorn.io.engineimage.vue?f1f4","webpack://longhorn-0.1.0/./detail/longhorn.io.engineimage.vue?6b80"],"sourcesContent":["<script setup>\nimport { computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useFetch } from '@shell/components/Resource/Detail/FetchLoader/composables';\nimport Loading from '@shell/components/Loading';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport LabelValue from '@shell/components/LabelValue';\nimport Tabbed from '@shell/components/Tabbed';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport { _VIEW } from '@shell/config/query-params';\nimport { LONGHORN_RESOURCES, LONGHORN_SETTINGS } from '@longhorn/types/resources';\n\nconst props = defineProps({\n  mode: {\n    type: String,\n    default: _VIEW,\n  },\n  value: {\n    type: Object,\n    required: false,\n    default: () => ({}),\n  },\n});\n\nconst store = useStore();\n\nconst { pending: fetchStatePending } = useFetch(async () => {\n  const inStore = store.getters['currentProduct'].inStore;\n\n  await store.dispatch(`${inStore}/find`, {\n    type: LONGHORN_RESOURCES.SETTINGS,\n    id: LONGHORN_SETTINGS.DEFAULT_ENGINE_IMAGE,\n  });\n});\n\nconst nodeDeploymentMap = computed(() => {\n  const map = props.value?.status?.nodeDeploymentMap;\n\n  if (!map) return '-';\n\n  const result = Object.entries(map)\n    .filter(([, val]) => val === true)\n    .map(([key]) => key)\n    .join(', ');\n\n  return displayValue(result);\n});\n\nfunction displayValue(val) {\n  return val === null || val === undefined || String(val).trim() === '' ? '-' : val;\n}\n</script>\n\n<template>\n  <Loading v-if=\"fetchStatePending\" />\n  <div v-else>\n    <NameNsDescription\n      :value=\"value\"\n      :mode=\"mode\"\n      :namespace-disabled=\"true\"\n      :name-hidden=\"mode !== _VIEW\"\n      :description-hidden=\"true\"\n    />\n    <Tabbed side-tabs :resource=\"value\">\n      <Tab name=\"basics\" label-key=\"longhorn.engineImage.tab.basics\">\n        <LabelValue :name=\"t('longhorn.engineImage.form.image')\" :value=\"displayValue(value?.spec?.image)\" />\n        <LabelValue :name=\"t('longhorn.engineImage.form.status')\" :value=\"displayValue(value?.status?.state)\" />\n        <LabelValue :name=\"t('longhorn.engineImage.form.default')\" :value=\"displayValue(`${value?.isDefault}`)\" />\n        <LabelValue :name=\"t('longhorn.engineImage.form.refCount')\" :value=\"displayValue(value?.status?.refCount)\" />\n        <LabelValue :name=\"t('longhorn.engineImage.form.buildDate')\" :value=\"displayValue(value?.status?.buildDate)\" />\n        <LabelValue\n          :name=\"t('longhorn.engineImage.form.cliAPIVersion')\"\n          :value=\"displayValue(value?.status?.cliAPIVersion)\"\n        />\n        <LabelValue\n          :name=\"t('longhorn.engineImage.form.controllerAPIVersion')\"\n          :value=\"displayValue(value?.status?.controllerAPIVersion)\"\n        />\n        <LabelValue\n          :name=\"t('longhorn.engineImage.form.noRefSince')\"\n          :value=\"displayValue(value?.status?.noRefSince)\"\n        />\n        <LabelValue :name=\"t('longhorn.engineImage.form.nodeDeploymentMap')\" :value=\"nodeDeploymentMap\" />\n      </Tab>\n    </Tabbed>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.label {\n  margin-bottom: 20px;\n}\n</style>\n","import script from \"./longhorn.io.engineimage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./longhorn.io.engineimage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./longhorn.io.engineimage.vue?vue&type=style&index=0&id=7d213838&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7d213838\"]])\n\nexport default __exports__","import { computed, ref, toValue } from 'vue';\n\nexport const useFetch = <T>(fetch: () => Promise<T>) => {\n  const loading = ref<boolean>(true);\n  const refreshing = ref<boolean>(false);\n  const data = ref<T>();\n  const error = ref<any>();\n\n  const load = async() => {\n    try {\n      loading.value = true;\n\n      data.value = toValue(await fetch());\n    } catch (ex) {\n      error.value = ex;\n      console.error('Error fetching data', ex); // eslint-disable-line no-console\n    } finally {\n      loading.value = false;\n    }\n  };\n\n  const refresh = async() => {\n    if (loading.value) {\n      return;\n    }\n\n    refreshing.value = true;\n    await load();\n    refreshing.value = false;\n  };\n\n  load();\n\n  return computed(() => ({\n    loading:    loading.value,\n    data:       data.value,\n    error:      error.value,\n    refresh,\n    refreshing: refreshing.value\n  }));\n};\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./longhorn.io.engineimage.vue?vue&type=style&index=0&id=7d213838&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7f6b65fc\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".label[data-v-7d213838]{margin-bottom:20px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["props","__props","store","useStore","pending","fetchStatePending","useFetch","async","inStore","getters","dispatch","type","LONGHORN_RESOURCES","SETTINGS","id","LONGHORN_SETTINGS","DEFAULT_ENGINE_IMAGE","nodeDeploymentMap","computed","map","value","status","result","Object","entries","filter","val","key","join","displayValue","undefined","String","trim","_unref","_createBlock","Loading","_createElementBlock","_hoisted_1","_createVNode","NameNsDescription","mode","_VIEW","Tabbed","resource","Tab","name","LabelValue","_ctx","t","spec","image","state","isDefault","refCount","buildDate","cliAPIVersion","controllerAPIVersion","noRefSince","__exports__","fetch","loading","ref","refreshing","data","error","load","toValue","ex","console","refresh","content","__esModule","default","module","locals","exports","add","___CSS_LOADER_EXPORT___","push"],"ignoreList":[],"sourceRoot":""}