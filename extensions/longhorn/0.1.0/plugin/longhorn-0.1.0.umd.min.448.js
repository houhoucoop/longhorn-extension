(("undefined"!==typeof self?self:this)["webpackChunklonghorn_0_1_0"]=("undefined"!==typeof self?self:this)["webpackChunklonghorn_0_1_0"]||[]).push([[448],{15829:function(e,a,t){"use strict";t.r(a);var l=t(36758),n=t.n(l),s=t(40935),c=t.n(s),i=c()(n());i.push([e.id,".label[data-v-357627fa]{display:flex;flex-direction:column}.label .value[data-v-357627fa]{font-size:14px;line-height:18px}",""]),a["default"]=i},39412:function(e,a,t){"use strict";t.d(a,{A:function(){return p}});var l=t(9274);const n={class:"label"},s={class:"text-label"},c={class:"value"};function i(e,a,t,i,o,r){return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createElementVNode)("div",s,[(0,l.renderSlot)(e.$slots,"name",{},()=>[(0,l.createTextVNode)((0,l.toDisplayString)(t.name),1)],!0)]),(0,l.createElementVNode)("div",c,[(0,l.renderSlot)(e.$slots,"value",{},()=>[(0,l.createTextVNode)((0,l.toDisplayString)(t.value),1)],!0)])])}var o={props:{name:{type:String,required:!0},value:{type:[Number,String,void 0],default:""}}},r=(t(88405),t(47433));const d=(0,r.A)(o,[["render",i],["__scopeId","data-v-357627fa"]]);var p=d},43921:function(e,a,t){"use strict";t.r(a);var l=t(36758),n=t.n(l),s=t(40935),c=t.n(s),i=c()(n());i.push([e.id,"button[data-v-626f3d7e]{all:unset;height:0;position:relative;top:-35px;float:right;margin-right:7px;cursor:pointer}button .align-value[data-v-626f3d7e]{padding-top:7px}.row.name-ns-description[data-v-626f3d7e]{max-height:61px}.row .namespace-select[data-v-626f3d7e]  .labeled-select{min-width:40%}.row .namespace-select[data-v-626f3d7e]  .labeled-select .v-select.inline.vs--single{padding-bottom:2px}.row.flip-direction[data-v-626f3d7e]{flex-direction:column}.row.flip-direction.name-ns-description[data-v-626f3d7e]{max-height:none}.row.flip-direction>div[data-v-626f3d7e]>*{margin-bottom:20px}",""]),a["default"]=i},68529:function(e,a,t){var l=t(43921);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var n=t(74825).A;n("6f4e9acc",l,!0,{sourceMap:!1,shadowMode:!1})},79287:function(e,a,t){"use strict";t.d(a,{A:function(){return D}});var l=t(9274);const n={class:"row mb-20"},s=["data-testid"],c=["aria-label"],i={class:"icon icon-close align-value"},o=["data-testid"],r=["data-testid"],d=["data-testid"],p={key:3,class:"spacer"};function m(e,a,t,m,u,v){const h=(0,l.resolveComponent)("LabeledInput"),f=(0,l.resolveComponent)("LabeledSelect"),N=(0,l.resolveDirective)("clean-tooltip");return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.renderSlot)(e.$slots,"project-selector",{},void 0,!0),t.namespaced&&!t.nameNsHidden&&u.createNamespace?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,"data-testid":t.componentTestid+"-namespace-create",class:"col span-3"},[(0,l.createVNode)(h,{ref:"namespaceInput",value:m.namespace,"onUpdate:value":a[0]||(a[0]=e=>m.namespace=e),label:e.t("namespace.label"),placeholder:e.t("namespace.createNamespace"),disabled:v.namespaceReallyDisabled,mode:t.mode,"min-height":30,required:t.nameRequired,rules:t.rules.namespace},null,8,["value","label","placeholder","disabled","mode","required","rules"]),(0,l.createElementVNode)("button",{"aria-label":e.t("namespace.cancelCreateAriaLabel"),onClick:a[1]||(a[1]=(...e)=>v.cancelCreateNamespace&&v.cancelCreateNamespace(...e))},[(0,l.withDirectives)((0,l.createElementVNode)("i",i,null,512),[[N,e.t("generic.cancel")]])],8,c)],8,s)):(0,l.createCommentVNode)("",!0),!t.namespaced||t.nameNsHidden||u.createNamespace?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:1,"data-testid":t.componentTestid+"-namespace",class:"col span-3"},[(0,l.withDirectives)((0,l.createVNode)(f,{value:m.namespace,"onUpdate:value":a[2]||(a[2]=e=>m.namespace=e),clearable:!0,options:m.options,disabled:v.namespaceReallyDisabled,searchable:!0,mode:t.mode,multiple:!1,label:e.t("namespace.label"),placeholder:e.t("namespace.selectOrCreate"),rules:t.rules.namespace,required:"",onSelecting:v.selectNamespace},null,8,["value","options","disabled","mode","label","placeholder","rules","onSelecting"]),[[l.vShow,!u.createNamespace]])],8,o)),t.nameHidden||t.nameNsHidden?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:2,"data-testid":t.componentTestid+"-name",class:"col span-3"},[(0,l.createVNode)(h,{ref:"nameInput",key:"name",value:m.name,"onUpdate:value":a[3]||(a[3]=e=>m.name=e),"data-testid":"NameNsDescriptionNameInput",label:e.t(t.nameLabel),placeholder:e.t(t.namePlaceholder),disabled:v.nameReallyDisabled,mode:t.mode,"min-height":30,required:t.nameRequired,rules:t.rules.name},null,8,["value","label","placeholder","disabled","mode","required","rules"])],8,r)),(0,l.renderSlot)(e.$slots,"customize",{},void 0,!0),(0,l.withDirectives)((0,l.createElementVNode)("div",{"data-testid":t.componentTestid+"-description",class:(0,l.normalizeClass)(["col",t.extraColumns.length>0?"span-3":"span-6"])},[(0,l.createVNode)(h,{key:"description",value:m.description,"onUpdate:value":a[4]||(a[4]=e=>m.description=e),mode:t.mode,disabled:t.descriptionDisabled,label:e.t(t.descriptionLabel),placeholder:e.t(t.descriptionPlaceholder),"min-height":30,rules:t.rules.description},null,8,["value","mode","disabled","label","placeholder","rules"])],10,d),[[l.vShow,!t.descriptionHidden]]),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(t.extraColumns,(a,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:t,class:(0,l.normalizeClass)({col:!0,[v.colSpan]:!0})},[(0,l.renderSlot)(e.$slots,a,{},void 0,!0)],2))),128)),t.showSpacer?((0,l.openBlock)(),(0,l.createElementBlock)("div",p)):(0,l.createCommentVNode)("",!0)])}var u=t(65359),v=t(76978),h=t(74302),f=t(35664),N=t(2841),y=t(14220),b=t(79380),g=t(90175);function S(e){return(e||"").trim().toLowerCase().replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var k=t(95457),w={name:"NameNsDescription",emits:["update:value","isNamespaceNew"],components:{LabeledInput:b.o,LabeledSelect:g.A},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},nameHidden:{type:Boolean,default:!1},nameNsHidden:{type:Boolean,default:!1},descriptionHidden:{type:Boolean,default:!1},extraColumns:{type:Array,default:()=>[]},nameLabel:{type:String,default:"nameNsDescription.name.label"},nameEditable:{type:Boolean,default:!1},namePlaceholder:{type:String,default:"nameNsDescription.name.placeholder"},nameDisabled:{type:Boolean,default:!1},nameRequired:{type:Boolean,default:!0},nameNormalized:{type:Boolean,default:!0},namespaced:{type:Boolean,default:!0},namespaceFilter:{type:Function,default:null},namespaceMapper:{type:Function,default:null},namespaceType:{type:String,default:f.CU},namespaceLabel:{type:String,default:"nameNsDescription.namespace.label"},namespacePlaceholder:{type:String,default:"nameNsDescription.namespace.placeholder"},namespaceDisabled:{type:Boolean,default:!1},namespaceNewAllowed:{type:Boolean,default:!1},noDefaultNamespace:{type:Boolean,default:!1},namespacesOverride:{type:Array,default:null},namespaceOptions:{type:Array,default:null},createNamespaceOverride:{type:Boolean,default:!1},descriptionLabel:{type:String,default:"nameNsDescription.description.label"},descriptionPlaceholder:{type:String,default:"nameNsDescription.description.placeholder"},descriptionDisabled:{type:Boolean,default:!1},nameKey:{type:String,default:null},namespaceKey:{type:String,default:null},descriptionKey:{type:String,default:null},forceNamespace:{type:String,default:null},showSpacer:{type:Boolean,default:!0},horizontal:{type:Boolean,default:!0},rules:{default:()=>({namespace:[],name:[],description:[]}),type:Object},componentTestid:{type:String,default:"name-ns-description"}},data(){return{createNamespace:!1}},setup(e,{emit:a}){const t=(0,l.toRef)(e.value),n=t.value.metadata,s=(0,l.ref)(null),c=(0,l.ref)(null),i=(0,l.ref)(null);(0,l.watch)(c,t=>{e.normalizeName&&(t=S(t)),e.nameKey?(0,v.hZ)(e.value,e.nameKey,t):e.value.metadata["name"]=t,a("update:value",e.value)}),e.nameKey?c.value=(0,v.Jt)(t.value,e.nameKey):c.value=n?.name||"";const o=(0,l.computed)(()=>e.mode===y.YQ),r=(0,u.Pj)(),{t:d}=(0,k.s)(r),p=(0,l.computed)(()=>r.getters.allowedNamespaces()),m=(0,l.computed)(()=>r.getters.namespaces()),b=(0,l.computed)(()=>r.getters.currentCluster),g=(0,l.computed)(()=>r.getters["currentStore"]()),w=(0,l.computed)(()=>r.getters[`${g.value}/schemaFor`](f.CU)),C=(0,l.computed)(()=>(w.value?.collectionMethods||[]).includes("POST")&&b.value?.canUpdate),B=(0,l.computed)(()=>{let a;if(e.namespacesOverride)a=e.namespacesOverride;else if(e.namespaceOptions)a=(e.namespaceOptions.map(e=>e.name)||[]).sort();else{const e=o.value?p.value:m.value;a=Object.keys(e)}const t=a.map(e=>({nameDisplay:e,id:e})).map(e.namespaceMapper||(e=>({label:e.nameDisplay,value:e.id}))),l=(0,h.Ul)(t,"label");e.forceNamespace&&l.unshift({label:e.forceNamespace,value:e.forceNamespace});const n={label:d("namespace.createNamespace"),value:"",kind:"highlighted"},s={label:"divider",disabled:!0,kind:"divider"},c=C.value||e.createNamespaceOverride?[n,s]:[];return[...c,...l]}),D=t=>{e.forceNamespace&&(t=e.forceNamespace),e.namespaced&&a("isNamespaceNew",!t||B.value&&!B.value.find(e=>e.value===t)),e.namespaceKey?(0,v.hZ)(e.value,e.namespaceKey,t):e.value.metadata.namespace=t};return e.namespaced&&(e.forceNamespace?(s.value=(0,l.toRef)(e.forceNamespace),D(s)):e.namespaceKey?s.value=(0,v.Jt)(t.value,e.namespaceKey):s.value=n?.namespace,s.value||e.noDefaultNamespace||(s.value=r.getters["defaultNamespace"],n&&(n.namespace=s))),e.descriptionKey?i.value=(0,v.Jt)(t.value,e.descriptionKey):i.value=n?.annotations?.[N.tC],{namespace:s,name:c,description:i,isCreate:o,options:B,updateNamespace:D}},computed:{...(0,u.i0)("cru-resource",["setCreateNamespace"]),namespaceReallyDisabled(){return!!this.forceNamespace||this.namespaceDisabled||this.mode===y.G5},nameReallyDisabled(){return this.nameDisabled||this.mode===y.G5&&!this.nameEditable},isView(){return this.mode===y.nW},showCustomize(){return this.mode===y.YQ&&this.name&&this.name.length>0},colSpan(){if(!this.horizontal)return"span-8";let e=(this.nameNsHidden?0:2)+(this.descriptionHidden?0:1)+this.extraColumns.length;e=Math.max(2,e);const a=12/e;return`span-${a}`}},watch:{namespace(e){this.updateNamespace(e),this.$emit("update:value",this.value)},description(e){this.descriptionKey?(0,v.hZ)(this.value,this.descriptionKey,e):this.value.setAnnotation(N.tC,e),this.$emit("update:value",this.value)}},mounted(){this.$nextTick(()=>{this.$refs.nameInput&&this.$refs.nameInput.focus()})},methods:{changeNameAndNamespace(e){this.name=(e.text||"").toLowerCase(),this.namespace=e.selected},cancelCreateNamespace(e){this.createNamespace=!1,this.$parent.$emit("createNamespace",!1),this.namespace=this.$store.getters["defaultNamespace"]||this.options.find(e=>!!e.value)?.value},selectNamespace(e){e&&""!==e.value?(this.createNamespace=!1,this.$store.dispatch("cru-resource/setCreateNamespace",!1),this.$emit("isNamespaceNew",!1)):(this.createNamespace=!0,this.$store.dispatch("cru-resource/setCreateNamespace",!0),this.$emit("isNamespaceNew",!0),this.$nextTick(()=>this.$refs.namespaceInput.focus()))}}},C=(t(68529),t(47433));const B=(0,C.A)(w,[["render",m],["__scopeId","data-v-626f3d7e"]]);var D=B},88405:function(e,a,t){var l=t(15829);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var n=t(74825).A;n("0b86ac08",l,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=longhorn-0.1.0.umd.min.448.js.map